# OmniWall JavaScript 模块文档

## 模块化重构说明

主页面代码已成功重构为模块化架构，提高了代码的可维护性和可扩展性。

## 模块结构

### app.js - 主应用模块
- **功能**: 协调所有组件，管理应用生命周期
- **职责**: 
  - 初始化所有组件
  - 设置事件监听器
  - 协调组件间通信
  - 管理应用状态

### poster-grid.js - 海报网格组件
- **功能**: 负责电视剧海报的显示和管理
- **职责**:
  - 渲染海报网格布局
  - 处理电视剧数据展示
  - 处理海报点击事件
  - 管理加载状态、错误状态和空状态

### window-controls.js - 窗口控制组件
- **功能**: 管理窗口控制按钮（最小化、最大化、关闭）
- **职责**:
  - 设置窗口控制按钮事件
  - 与主进程通信控制窗口状态
  - 更新最大化按钮状态

### sidebar.js - 侧边栏组件
- **功能**: 管理左侧导航栏
- **职责**:
  - 处理导航图标点击事件
  - 管理导航项状态
  - 支持动态添加导航项

### state-manager.js - 状态管理组件
- **功能**: 集中管理应用状态
- **职责**:
  - 管理电视剧数据状态
  - 处理加载、错误、空状态
  - 状态变化通知机制
  - 与IPC通信处理数据更新

## 数据流

```
主进程 (main.js)
    ↓ IPC通信
StateManager (状态管理)
    ↓ 状态变化事件
App (应用协调)
    ↓ 组件协调
PosterGrid (海报显示)
WindowControls (窗口控制)
Sidebar (侧边栏)
```

## 使用方式

1. **初始化**: DOM加载完成后自动初始化所有组件
2. **数据流**: 主进程发送数据 → StateManager处理 → 组件更新
3. **事件处理**: 组件间通过事件进行通信
4. **状态管理**: 集中式状态管理，便于调试和维护

## 扩展性

- 可以轻松添加新组件
- 状态管理统一，便于调试
- 模块化设计，便于测试
- 事件驱动架构，解耦组件间依赖